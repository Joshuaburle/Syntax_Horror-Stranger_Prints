#!/usr/bin/env bash
# chemin home utilisé : /home/frxjoan
import tkinter as tk
from functools import partial

STORY = {
# 1 - Écran d’ouverture – “Jean-Michel Pointeur (v1.0)”
Bonjour.
Je suis Jean-Michel Pointeur, votre tuteur personnel.
Aujourd’hui, on ne “devine” pas les pointeurs : on les comprend.
Vous verrez ce qu’est une adresse,

comment déréférencer (*),
marcher dans la mémoire pas à pas, 
et pourquoi certains chemins ne doivent jamais être suivis.

Tapez ENTER pour initialiser votre pile et votre tas.
Note : si vous entendez quelque chose, ignorez-le. Certaines mémoires rémanentes chuchotent encore.

>> En attente de l’utilisateur…
# Petit message d'erreur qui apparait quelque seconde.
Signature d’intégrité : 0xJMP-OK
Avertissement : 1 bloc mémoire non catalogué détecté. 


# Frame 2 : Rentrer son prenom

}

root = tk.Tk()
root.title("Mini jeu — JeanMichel")
root.geometry("480x260")
text_var = tk.StringVar()

text_label = tk.Label(
    root, textvariable=text_var, wraplength=440, justify="left", padx=10, pady=10
)
text_label.pack(fill="both", expand=True)

btn_frame = tk.Frame(root)
btn_frame.pack(pady=8)


def show(node_id):
    node = STORY[node_id]
    text_var.set(node["text"])
    for w in btn_frame.winfo_children():
        w.destroy()
    if node["choices"]:
        for label, next_id in node["choices"]:
            tk.Button(
                btn_frame, text=label, width=24, command=partial(show, next_id)
            ).pack(pady=2)
    else:
        tk.Button(btn_frame, text="Quitter", width=24, command=root.destroy).pack(
            pady=4
        )


show("start")
root.mainloop()